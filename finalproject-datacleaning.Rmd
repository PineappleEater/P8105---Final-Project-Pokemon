---
title: "Data Source and Data Cleaning Process"
output: html_document
---
```{r}
library(rvest)
library(tidyverse)
```


### Data Source  
The data used in this project were scraped from pokemondb.net, a resource that maintains one of the most complete collections of Pokémon information to date, encompassing all nine generations (1,025 Pokémon species including alternate forms).  
The dataset includes variables such as base statistics, physical dimensions (height and weight), and type attributes.  
A portion of the metadata is sourced from the Veekun database, with additional details compiled by community contributors based on in-game data.

I used `read_html()`, `html_table()`, and `as_tibble()` converted web page data into a tabular format.  
```{r}
raw_state_df <- read_html("data/Pokemon.html") |> 
  html_table()


raw_wh_df <- read_html("data/Pokemon by height and weight.html") |> 
  html_table()
```

```{r}
pokemon_state_df <- as_tibble(raw_state_df[[1]]) |> 
  janitor::clean_names()

pokemon_df <- as_tibble(raw_wh_df[[1]]) |> 
  janitor::clean_names() |> 
  right_join(pokemon_state_df, by = c("name", "type", "number")) |> 
  
  mutate(type_split = str_extract_all(type, "[A-Z][a-z]+")) |> 
  mutate(
    type_1 = map_chr(type_split, ~ .x[1] %||% NA_character_),
    type_2 = map_chr(type_split, ~ .x[2] %||% NA_character_)
  ) |> 
  
  rename(
    dex = number
  ) |> 
  mutate(
    weight_kgs = ifelse(name == "EternatusEternamax", 9999.9, weight_kgs),
    height_m = ifelse(name == "EternatusEternamax", 999.9, height_m),
    bmi = ifelse(name == "EternatusEternamax", round(9999.9/(999.9^2),1), bmi)
  ) |> 
  select(dex, name, type_1, type_2, 
         total, hp, attack, defense, sp_atk, sp_def, speed, 
         height_m, weight_kgs, bmi, 
         -height_ft, -weight_lbs, -type_split, -type)

write_csv(pokemon_df, "data result/pokemon_data.csv")
```

Note: For "Eternamax" Eternatus, no official height or weight data exists. Based on its in-game appearance and the way it is portrayed in the anime—as a colossal, rift-like dragon composed of red energy, fractures, and crystalline lines—I set its size to 999.9 meters tall and 9999.9 kilograms in weight. The resulting BMI is effectively zero, perfectly matching the idea of a non-physical energy entity. This also aligns with how the anime almost never shows its full body, only fragmented sections of its form.

```{r}
# About special form of Pokémon:



```

```{r}
# About Legendary of Pokémon:
pokemon_legend <- pokemon_df |> 
  filter(dex %in% c(144, 145, 146, 150, 
                    243, 244, 245, 249, 250, 
                    377, 378, 379, 380, 381, 382, 383, 384, 
                    480, 481, 482, 483, 484, 485, 486, 487, 488, 
                    638, 639, 640, 641, 642, 643, 644, 645, 646, 
                    716, 717, 718, 
                    772, 773, 785, 786, 787, 788, 789, 790, 791, 792, 
                    800, 888, 889, 890, 891, 892, 894, 895, 896, 897, 898, 905, 
                    1001, 1002, 1003, 1004, 1007, 1008, 1014, 1015, 1016, 1017, 1024))


# About Mythical of Pokémon:
pokemon_myth <- pokemon_df |> 
  filter(dex %in% c(151, 
                    251, 
                    385, 386, 
                    489, 490, 491, 492, 493, 
                    494, 647, 684, 689, 
                    719, 720, 721, 
                    801, 802, 807, 808, 809, 
                    893, 
                    1025))


# About Paradox of Pokémon:
pokemon_para <- pokemon_df |> 
  filter(dex %in% c(984:995, 1005:1010, 1020:1023))


# About Ultra Beast of Pokémon:
pokemon_ub <- pokemon_df |> 
  filter(dex %in% c(793:799, 803:806))



```